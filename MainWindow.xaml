<Window x:Class="pokersoc_connect.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="pokersoc-connect"
        Height="720" Width="1080"
        WindowStartupLocation="CenterScreen"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True"
        KeyDown="Window_KeyDown">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- MAIN CONTENT AREA -->
    <Grid x:Name="MainContent" Grid.Row="0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*"/>
        <ColumnDefinition Width="3*"/>
      </Grid.ColumnDefinitions>

      <!-- LEFT SIDE: PLAYER ID + ACTIVITY LOG -->
      <Grid Grid.Column="0" Margin="12,12,6,12">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Current Player Section -->
        <Border Grid.Row="0" 
                BorderBrush="Gray" 
                BorderThickness="2" 
                Background="LightBlue" 
                Padding="10" 
                Margin="0,0,0,15">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <TextBlock Text="Current Player (Scan ID or Press Enter)" 
                       FontSize="14" 
                       FontWeight="Bold" 
                       Grid.Row="0" 
                       Margin="0,0,0,5"/>
            
            <Grid Grid.Row="1">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              
              <TextBox x:Name="CurrentPlayerIdBox"
                       Grid.Column="0"
                       FontSize="16"
                       VerticalContentAlignment="Center"
                       Padding="5"
                       KeyDown="CurrentPlayerIdBox_KeyDown"
                       TextChanged="CurrentPlayerIdBox_TextChanged"/>
              
              <Button x:Name="ClearPlayerBtn"
                      Grid.Column="1"
                      Content="âœ•"
                      FontSize="16"
                      FontWeight="Bold"
                      Width="40"
                      Margin="5,0,0,0"
                      Background="LightCoral"
                      Click="ClearPlayer_Click"/>
            </Grid>
            
            <!-- New Player Verification Panel (Hidden by default) -->
            <Border x:Name="NewPlayerPanel"
                    Grid.Row="2"
                    Visibility="Collapsed"
                    BorderBrush="Orange"
                    BorderThickness="2"
                    Background="LightYellow"
                    Padding="10"
                    Margin="0,10,0,0">
              <Grid>
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" 
                          Text="âš ï¸ NEW PLAYER DETECTED" 
                          FontSize="14" 
                          FontWeight="Bold" 
                          Foreground="DarkOrange"
                          Margin="0,0,0,5"/>
                
                <TextBlock x:Name="NewPlayerIdText"
                          Grid.Row="1"
                          Text="Player ID: "
                          FontSize="12"
                          Margin="0,0,0,8"/>
                
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
                  <Button Content="âœ“ Verify &amp; Add Player"
                          Click="VerifyNewPlayer_Click"
                          Background="LightGreen"
                          Padding="10,5"
                          Margin="0,0,5,0"
                          FontWeight="Bold"/>
                  <Button Content="âœ• Cancel"
                          Click="CancelNewPlayer_Click"
                          Background="LightCoral"
                          Padding="10,5"
                          FontWeight="Bold"/>
                </StackPanel>
              </Grid>
            </Border>
          </Grid>
        </Border>

        <!-- Activity header -->
        <TextBlock Text="Activity Log" FontSize="18" FontWeight="Bold" Grid.Row="1" Margin="0,0,0,10"/>

        <!-- Activity table -->
        <DataGrid x:Name="TxGrid"
                  Grid.Row="2"
                  AutoGenerateColumns="False"
                  IsReadOnly="True">
          <DataGrid.Columns>
            <DataGridTextColumn Header="Time" Binding="{Binding time}" Width="120"/>
            <DataGridTextColumn Header="Type" Binding="{Binding type}" Width="60"/>
            <DataGridTextColumn Header="Player" Binding="{Binding player_id}" Width="100"/>
            <DataGridTextColumn Header="Amount" Binding="{Binding cash_amt, StringFormat=C}" Width="80"/>
          </DataGrid.Columns>
        </DataGrid>
      </Grid>

      <!-- RIGHT SIDE: 8 BUTTON GRID (2 COLUMNS x 4 ROWS) -->
      <Grid Grid.Column="1" Margin="6,12,12,12">
        <Grid.RowDefinitions>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Row 1 -->
        <!-- Buy-in Button -->
        <Button x:Name="BuyInButton"
                Grid.Row="0" Grid.Column="0"
                Margin="0,0,5,5"
                Padding="15,20"
                Click="BuyIn_Click"
                BorderThickness="2"
                BorderBrush="Gray"
                IsEnabled="False">
          <StackPanel>
            <TextBlock Text="ðŸ’µ" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Buy-in" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Record player buy-in" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Cash-out Button -->
        <Button x:Name="CashOutButton"
                Grid.Row="0" Grid.Column="1"
                Margin="5,0,0,5"
                Padding="15,20"
                Click="CashOut_Click"
                BorderThickness="2"
                BorderBrush="Gray"
                IsEnabled="False">
          <StackPanel>
            <TextBlock Text="ðŸ’¸" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Cash-out" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Record player cash-out" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Row 2 -->
        <!-- Cashbox Button -->
        <Button Grid.Row="1" Grid.Column="0"
                Margin="0,5,5,5"
                Padding="15,20"
                Click="Cashbox_Click"
                BorderThickness="2"
                BorderBrush="Gray">
          <StackPanel>
            <TextBlock Text="ðŸ’°" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Cashbox" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Manage float and cash" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Food Button -->
        <Button Grid.Row="1" Grid.Column="1"
                Margin="5,5,0,5"
                Padding="15,20"
                Click="Food_Click"
                BorderThickness="2"
                BorderBrush="Gray">
          <StackPanel>
            <TextBlock Text="ðŸ•" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Food" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Sell food and drinks" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Row 3 -->
        <!-- Players Button -->
        <Button Grid.Row="2" Grid.Column="0"
                Margin="0,5,5,5"
                Padding="15,20"
                Click="Players_Click"
                BorderThickness="2"
                BorderBrush="Gray">
          <StackPanel>
            <TextBlock Text="ðŸ‘¥" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Players" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Manage player database" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Empty Button 6 -->
        <Button Grid.Row="2" Grid.Column="1"
                Margin="5,5,0,5"
                Padding="15,20"
                BorderThickness="2"
                BorderBrush="LightGray"
                IsEnabled="False">
          <StackPanel>
            <TextBlock Text="ðŸ“Š" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8" Opacity="0.3"/>
            <TextBlock Text="Button 6" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" Opacity="0.3"/>
            <TextBlock Text="Coming soon" FontSize="10" HorizontalAlignment="Center" Opacity="0.3"/>
          </StackPanel>
        </Button>

        <!-- Row 4 -->
        <!-- Lost Chips Button -->
        <Button Grid.Row="3" Grid.Column="0"
                Margin="0,5,5,0"
                Padding="15,20"
                Click="LostChips_Click"
                BorderThickness="2"
                BorderBrush="Gray">
          <StackPanel>
            <TextBlock Text="ðŸ’¸" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Lost Chips" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Record lost chips as tips" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Settings Button (Bottom Right) -->
        <Button Grid.Row="3" Grid.Column="1"
                Margin="5,5,0,0"
                Padding="15,20"
                Click="Settings_Click"
                BorderThickness="2"
                BorderBrush="Gray">
          <StackPanel>
            <TextBlock Text="âš™" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Settings" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Configure system" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>
      </Grid>
    </Grid>


    <!-- OVERLAY HOSTS FOR MODAL CONTENT - These cover the entire window -->
    <ContentControl x:Name="ScreenHost" Visibility="Collapsed" Grid.Row="0"/>
    <ContentControl x:Name="SettingsHost" Visibility="Collapsed" Grid.Row="0"/>
    <ContentControl x:Name="FoodHost" Visibility="Collapsed" Grid.Row="0"/>
  </Grid>
</Window>
