<UserControl x:Class="pokersoc_connect.Views.CashOutView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

            <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- STEP 1: Chip Selection Screen -->
    <Grid x:Name="ChipSelectionScreen" Grid.Row="0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*"/>
        <ColumnDefinition Width="3*"/>
      </Grid.ColumnDefinitions>

      <!-- LEFT SIDE: CHANGE TABLE -->
      <Grid Grid.Column="0" Margin="12,12,6,12">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Chips to Cash Out header -->
        <TextBlock Text="Chips to Cash Out" FontSize="18" FontWeight="Bold" Grid.Row="0" Margin="0,0,0,10"/>

        <!-- Custom Chip table -->
        <Grid Grid.Row="1" Background="White">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>
          
          <!-- Header Row -->
          <Border Grid.Row="0" BorderBrush="Gray" BorderThickness="1,1,1,1" Background="#E0E0E0">
            <Grid Height="40">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0" Text="Chip" FontWeight="Bold" FontSize="14"
                         VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5"/>
              <TextBlock Grid.Column="1" Text="Count" FontWeight="Bold" FontSize="14"
                         VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5"/>
              <TextBlock Grid.Column="2" Text="Value" FontWeight="Bold" FontSize="14"
                         VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5"/>
            </Grid>
          </Border>
          
          <!-- Data Rows Container - ItemsControl shares available vertical space -->
          <ItemsControl x:Name="ChangeRowsPanel" Grid.Row="1">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <UniformGrid Columns="1"/>
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
          </ItemsControl>
        </Grid>

        <!-- Player Info Display (Read-only) -->
        <Border Grid.Row="2" 
                BorderBrush="DarkGray" 
                BorderThickness="2" 
                Background="LightGray" 
                Padding="10" 
                Margin="0,0,0,10">
          <StackPanel>
            <TextBlock Text="Current Player" FontWeight="Bold" FontSize="12" Margin="0,0,0,5"/>
            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
              <TextBlock Text="Player ID: " FontWeight="Bold" Width="80"/>
              <TextBlock x:Name="PlayerIdDisplay" Text="" FontSize="14"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
              <TextBlock Text="Name: " FontWeight="Bold" Width="80"/>
              <TextBlock x:Name="PlayerNameDisplay" Text="" FontSize="14"/>
            </StackPanel>
          </StackPanel>
        </Border>

        <!-- Undo and Clear Buttons -->
        <Grid Grid.Row="3" Margin="0,0,0,10">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>
          
          <!-- Clear Button -->
          <Button Grid.Column="0" Margin="0,0,5,0" Click="Clear_Click"
                  Padding="15,20" BorderThickness="1,0,1,1" BorderBrush="Gray" Background="Orange">
            <StackPanel>
              <TextBlock Text="ðŸ—‘ï¸" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="Clear" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="All chips" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>

          <!-- Undo Button -->
          <Button Grid.Column="1" Margin="5,0,0,0" Click="Undo_Click"
                  Padding="15,20" BorderThickness="1,0,1,1" BorderBrush="Gray" Background="Yellow">
            <StackPanel>
              <TextBlock Text="â†¶" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="Undo" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="Last action" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>
        </Grid>

        <!-- Total Panel -->
        <Border Grid.Row="4"
                Margin="0,0,0,0"
                Padding="15,20"
                BorderThickness="1,0,1,1"
                BorderBrush="Gray"
                Background="LightGreen">
          <StackPanel>
            <TextBlock Text="ðŸ’°" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Total Value" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock x:Name="TotalText" Text="$0.00" FontSize="14" FontWeight="Bold" 
                       HorizontalAlignment="Center" Margin="0,5,0,0"/>
          </StackPanel>
        </Border>

        <!-- Action Buttons -->
        <Grid Grid.Row="5" Margin="0,10,0,0">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>
          
          <!-- Back Button -->
          <Button Grid.Column="0" Margin="0,0,5,0" Click="Back_Click"
                  Padding="15,20" BorderThickness="1,0,1,1" BorderBrush="Gray" Background="LightCoral">
            <StackPanel>
              <TextBlock Text="ðŸ " FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="Back" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="Return to main" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>

          <!-- Next Button -->
          <Button Grid.Column="1" Margin="5,0,0,0" Click="Next_Click"
                  x:Name="NextBtn"
                  Padding="15,20" BorderThickness="1,0,1,1" BorderBrush="Gray" Background="LightBlue"
                  IsEnabled="False">
            <StackPanel>
              <TextBlock Text="â†’" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="Next" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="Continue to change" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>
        </Grid>
      </Grid>

      <!-- RIGHT SIDE: DENOMINATION BUTTONS AND CONTROLS -->
      <Grid Grid.Column="1" Margin="6,12,12,12">
        <Grid.RowDefinitions>
          <RowDefinition Height="*"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Denomination Buttons Grid -->
        <Grid Grid.Row="0">
          <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>

          <!-- Row 1 -->
          <!-- 5c Chip Button -->
          <Button x:Name="C5" Grid.Row="0" Grid.Column="0"
                  Margin="0,0,5,5"
                  Padding="0"
                  Click="Chip_Click"
                  Tag="5"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  HorizontalContentAlignment="Stretch">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Border Grid.Column="1" VerticalAlignment="Center"
                      Background="#E0FFFFFF" BorderBrush="#404040" BorderThickness="3" CornerRadius="8"
                      Padding="12,8">
                <TextBlock x:Name="C5Count" Text="Ã—0" FontSize="32" FontWeight="Bold" 
                           Foreground="#202020" HorizontalAlignment="Center"/>
              </Border>
              <Image Grid.Column="3" x:Name="C5Image" Stretch="Uniform" VerticalAlignment="Stretch"/>
              <TextBlock x:Name="C5Text" Text="5c" Visibility="Collapsed"/>
            </Grid>
          </Button>

          <!-- 25c Chip Button -->
          <Button x:Name="C25" Grid.Row="0" Grid.Column="1"
                  Margin="5,0,0,5"
                  Padding="0"
                  Click="Chip_Click"
                  Tag="25"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  HorizontalContentAlignment="Stretch">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Image Grid.Column="1" x:Name="C25Image" Stretch="Uniform" VerticalAlignment="Stretch"/>
              <Border Grid.Column="3" VerticalAlignment="Center"
                      Background="#E0FFFFFF" BorderBrush="#404040" BorderThickness="3" CornerRadius="8"
                      Padding="12,8">
                <TextBlock x:Name="C25Count" Text="Ã—0" FontSize="32" FontWeight="Bold" 
                           Foreground="#202020" HorizontalAlignment="Center"/>
              </Border>
              <TextBlock x:Name="C25Text" Text="25c" Visibility="Collapsed"/>
            </Grid>
          </Button>

          <!-- Row 2 -->
          <!-- $1 Chip Button -->
          <Button x:Name="C100" Grid.Row="1" Grid.Column="0"
                  Margin="0,5,5,5"
                  Padding="0"
                  Click="Chip_Click"
                  Tag="100"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  HorizontalContentAlignment="Stretch">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Border Grid.Column="1" VerticalAlignment="Center"
                      Background="#E0FFFFFF" BorderBrush="#404040" BorderThickness="3" CornerRadius="8"
                      Padding="12,8">
                <TextBlock x:Name="C100Count" Text="Ã—0" FontSize="32" FontWeight="Bold" 
                           Foreground="#202020" HorizontalAlignment="Center"/>
              </Border>
              <Image Grid.Column="3" x:Name="C100Image" Stretch="Uniform" VerticalAlignment="Stretch"/>
              <TextBlock x:Name="C100Text" Text="$1" Visibility="Collapsed"/>
            </Grid>
          </Button>

          <!-- $5 Chip Button -->
          <Button x:Name="C500" Grid.Row="1" Grid.Column="1"
                  Margin="5,5,0,5"
                  Padding="0"
                  Click="Chip_Click"
                  Tag="500"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  HorizontalContentAlignment="Stretch">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Image Grid.Column="1" x:Name="C500Image" Stretch="Uniform" VerticalAlignment="Stretch"/>
              <Border Grid.Column="3" VerticalAlignment="Center"
                      Background="#E0FFFFFF" BorderBrush="#404040" BorderThickness="3" CornerRadius="8"
                      Padding="12,8">
                <TextBlock x:Name="C500Count" Text="Ã—0" FontSize="32" FontWeight="Bold" 
                           Foreground="#202020" HorizontalAlignment="Center"/>
              </Border>
              <TextBlock x:Name="C500Text" Text="$5" Visibility="Collapsed"/>
            </Grid>
          </Button>

          <!-- Row 3 -->
          <!-- $25 Plaque Button -->
          <Button x:Name="P2500" Grid.Row="2" Grid.Column="0"
                  Margin="0,5,5,5"
                  Padding="0"
                  Click="Chip_Click"
                  Tag="2500"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  HorizontalContentAlignment="Stretch">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Border Grid.Column="1" VerticalAlignment="Center"
                      Background="#E0FFFFFF" BorderBrush="#404040" BorderThickness="3" CornerRadius="8"
                      Padding="12,8">
                <TextBlock x:Name="P2500Count" Text="Ã—0" FontSize="32" FontWeight="Bold" 
                           Foreground="#202020" HorizontalAlignment="Center"/>
              </Border>
              <Image Grid.Column="3" x:Name="P2500Image" Stretch="Uniform" VerticalAlignment="Stretch"/>
              <TextBlock x:Name="P2500Text" Text="$25" Visibility="Collapsed"/>
            </Grid>
          </Button>

          <!-- $100 Plaque Button -->
          <Button x:Name="P10000" Grid.Row="2" Grid.Column="1"
                  Margin="5,5,0,5"
                  Padding="0"
                  Click="Chip_Click"
                  Tag="10000"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  HorizontalContentAlignment="Stretch">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Image Grid.Column="1" x:Name="P10000Image" Stretch="Uniform" VerticalAlignment="Stretch"/>
              <Border Grid.Column="3" VerticalAlignment="Center"
                      Background="#E0FFFFFF" BorderBrush="#404040" BorderThickness="3" CornerRadius="8"
                      Padding="12,8">
                <TextBlock x:Name="P10000Count" Text="Ã—0" FontSize="32" FontWeight="Bold" 
                           Foreground="#202020" HorizontalAlignment="Center"/>
              </Border>
              <TextBlock x:Name="P10000Text" Text="$100" Visibility="Collapsed"/>
            </Grid>
          </Button>

          <!-- Row 4 -->
          <!-- Empty space for balance -->
          <Button Grid.Row="3" Grid.Column="0"
                  Margin="0,5,5,5"
                  Padding="15,20"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  IsEnabled="False">
            <StackPanel>
              <TextBlock Text="" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>

          <!-- Empty space for balance -->
          <Button Grid.Row="3" Grid.Column="1"
                  Margin="5,5,0,5"
                  Padding="15,20"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  IsEnabled="False">
            <StackPanel>
              <TextBlock Text="" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>

          <!-- Row 5 -->
          <!-- Empty space for balance -->
          <Button Grid.Row="4" Grid.Column="0"
                  Margin="0,5,5,5"
                  Padding="15,20"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  IsEnabled="False">
            <StackPanel>
              <TextBlock Text="" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>

          <!-- Empty space for balance -->
          <Button Grid.Row="4" Grid.Column="1"
                  Margin="5,5,0,5"
                  Padding="15,20"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  IsEnabled="False">
            <StackPanel>
              <TextBlock Text="" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>

          <!-- Empty space for balance -->
          <Button Grid.Row="4" Grid.Column="1"
                  Margin="5,5,0,5"
                  Padding="15,20"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  IsEnabled="False">
            <StackPanel>
              <TextBlock Text="" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>

          <!-- Row 6 -->
          <!-- Empty space for balance -->
          <Button Grid.Row="5" Grid.Column="0"
                  Margin="0,5,5,0"
                  Padding="15,20"
                  BorderThickness="2"
                  BorderBrush="Gray"
                  IsEnabled="False">
            <StackPanel>
              <TextBlock Text="" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
              <TextBlock Text="" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
              <TextBlock Text="" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
            </StackPanel>
          </Button>

          <!-- Multiplier Controls -->
          <Grid Grid.Row="5" Grid.Column="1" Margin="5,5,0,0">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- 1x Button -->
            <Button x:Name="X1Button" Grid.Column="0"
                    Margin="0,0,2,0"
                    Padding="5,10"
                    BorderThickness="2"
                    BorderBrush="Gray"
                    Background="LightGreen"
                    Click="Multiplier1x_Click">
              <StackPanel>
                <TextBlock Text="Ã—1" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,5"/>
              </StackPanel>
            </Button>

            <!-- 5x Button -->
            <Button x:Name="X5Button" Grid.Column="1"
                    Margin="2,0,2,0"
                    Padding="5,10"
                    BorderThickness="2"
                    BorderBrush="Gray"
                    Background="LightBlue"
                    Click="Multiplier5x_Click">
              <StackPanel>
                <TextBlock Text="Ã—5" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,5"/>
              </StackPanel>
            </Button>

            <!-- 20x Button -->
            <Button x:Name="X20Button" Grid.Column="2"
                    Margin="2,0,0,0"
                    Padding="5,10"
                    BorderThickness="2"
                    BorderBrush="Gray"
                    Background="LightBlue"
                    Click="Multiplier20x_Click">
              <StackPanel>
                <TextBlock Text="Ã—20" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,5"/>
              </StackPanel>
            </Button>
          </Grid>
        </Grid>
      </Grid>
    </Grid>

    <!-- STEP 2: Change Customization Screen -->
    <Grid x:Name="ChangeCustomizationScreen" Grid.Row="0" Visibility="Collapsed">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*"/>
        <ColumnDefinition Width="3*"/>
      </Grid.ColumnDefinitions>

      <!-- LEFT SIDE: CHANGE CUSTOMIZATION -->
      <Grid Grid.Column="0" Margin="12,12,6,12">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Change header -->
        <TextBlock Text="Change Breakdown" FontSize="18" FontWeight="Bold" Grid.Row="0" Margin="0,0,0,10"/>

        <!-- Change table -->
        <Grid Grid.Row="1" Background="White">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>
          
          <!-- Header Row -->
          <Border Grid.Row="0" BorderBrush="Gray" BorderThickness="1,1,1,1" Background="#E0E0E0">
            <Grid Height="40">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0" Text="Denomination" FontWeight="Bold" FontSize="14"
                         VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5"/>
              <TextBlock Grid.Column="1" Text="Count" FontWeight="Bold" FontSize="14"
                         VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5"/>
              <TextBlock Grid.Column="2" Text="Value" FontWeight="Bold" FontSize="14"
                         VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5"/>
            </Grid>
          </Border>
          
          <!-- Data Rows Container - ItemsControl shares available vertical space -->
          <ItemsControl x:Name="ChangeCustomizationRowsPanel" Grid.Row="1">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <UniformGrid Columns="1"/>
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
          </ItemsControl>
        </Grid>

        <!-- Total Panel -->
        <Border Grid.Row="2"
                Margin="0,10,0,10"
                Padding="15,20"
                BorderThickness="1,0,1,1"
                BorderBrush="Gray"
                Background="LightGreen">
          <StackPanel>
            <TextBlock Text="ðŸ’°" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Total Value" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock x:Name="ChangeTotalText" Text="$0.00" FontSize="14" FontWeight="Bold" 
                       HorizontalAlignment="Center" Margin="0,5,0,0"/>
          </StackPanel>
        </Border>

      </Grid>

      <!-- RIGHT SIDE: 8 BUTTON GRID (2 COLUMNS x 4 ROWS) -->
      <Grid Grid.Column="1" Margin="6,12,12,12">
        <Grid.RowDefinitions>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Row 1 -->
        <!-- Add Food Button -->
        <Button Grid.Row="0" Grid.Column="0"
                Margin="0,0,5,5"
                Padding="15,20"
                Click="AddFood_Click"
                BorderThickness="2"
                BorderBrush="Gray">
          <StackPanel>
            <TextBlock Text="ðŸ•" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Add Food" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Purchase items" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Add Tip Button -->
        <Button Grid.Row="0" Grid.Column="1"
                Margin="5,0,0,5"
                Padding="15,20"
                Click="AddTip_Click"
                BorderThickness="2"
                BorderBrush="Gray">
          <StackPanel>
            <TextBlock Text="ðŸ’¸" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Add Tip" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Custom tip amount" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Row 2 -->
        <!-- Change Denominations Button -->
        <Button Grid.Row="1" Grid.Column="0"
                Margin="0,5,5,5"
                Padding="15,20"
                Click="ChangeDenominations_Click"
                BorderThickness="2"
                BorderBrush="Gray">
          <StackPanel>
            <TextBlock Text="ðŸ’°" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Change" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Customize denominations" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Add Extra Cash Button -->
        <Button Grid.Row="1" Grid.Column="1"
                Margin="5,5,0,5"
                Padding="15,20"
                Click="AddExtraCash_Click"
                BorderThickness="2"
                BorderBrush="Gray">
          <StackPanel>
            <TextBlock Text="ðŸ’µ" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Add Cash" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Add extra money" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Row 3 -->
        <!-- Summary Panel -->
        <Border Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2"
                Margin="0,5,0,5"
                Padding="15,20"
                BorderThickness="2"
                BorderBrush="Gray"
                Background="LightBlue">
          <StackPanel>
            <TextBlock Text="ðŸ“Š" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Cashout Summary" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock x:Name="ChipValueText" Text="Chip Value: $0.00" FontSize="12" HorizontalAlignment="Center" Margin="0,2,0,0"/>
            <TextBlock x:Name="FoodValueText" Text="Food: $0.00" FontSize="12" HorizontalAlignment="Center" Margin="0,2,0,0"/>
            <TextBlock x:Name="TipValueText" Text="Tip: $0.00" FontSize="12" HorizontalAlignment="Center" Margin="0,2,0,0"/>
            <TextBlock x:Name="ExtraCashValueText" Text="Extra Cash: $0.00" FontSize="12" HorizontalAlignment="Center" Margin="0,2,0,0"/>
            <TextBlock x:Name="FinalChangeText" Text="Final Change: $0.00" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,5,0,0"/>
          </StackPanel>
        </Border>

        <!-- Row 4 -->
        <!-- Back Button -->
        <Button Grid.Row="3" Grid.Column="0"
                Margin="0,5,5,0"
                Padding="15,20"
                Click="BackToChipSelection_Click"
                BorderThickness="2"
                BorderBrush="Gray"
                Background="LightCoral">
          <StackPanel>
            <TextBlock Text="â†" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Back" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Edit chips" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>

        <!-- Confirm Button -->
        <Button Grid.Row="3" Grid.Column="1"
                Margin="5,5,0,0"
                Click="ConfirmCashOut_Click"
                x:Name="ConfirmCashOutBtn"
                Padding="15,20"
                BorderThickness="2"
                BorderBrush="Gray"
                Background="LightBlue"
                IsEnabled="False">
          <StackPanel>
            <TextBlock Text="âœ“" FontSize="36" HorizontalAlignment="Center" Margin="0,0,0,8"/>
            <TextBlock Text="Confirm" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Process cashout" FontSize="10" HorizontalAlignment="Center" Opacity="0.7"/>
          </StackPanel>
        </Button>
      </Grid>

      <!-- INLINE DIALOG OVERLAYS -->
      
      <!-- Food Selection Dialog -->
      <Border x:Name="FoodSelectionDialog" 
              Grid.ColumnSpan="2" 
              Visibility="Collapsed"
              Background="#80000000" 
              HorizontalAlignment="Stretch" 
              VerticalAlignment="Stretch">
        <Border Background="White" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" 
                Padding="30" 
                CornerRadius="10"
                MinWidth="500"
                MinHeight="600">
          <StackPanel>
            <TextBlock Text="Select Food Items" FontSize="20" FontWeight="Bold" Margin="0,0,0,20" HorizontalAlignment="Center"/>
            
            <!-- Selected Items Display -->
            <Border Background="#F0F0F0" CornerRadius="5" Padding="10" Margin="0,0,0,10">
              <StackPanel>
                <TextBlock Text="Selected Items:" FontWeight="Bold" Margin="0,0,0,5"/>
                <StackPanel x:Name="SelectedFoodItemsList" Orientation="Vertical">
                  <!-- Selected items will be populated dynamically -->
                </StackPanel>
                <TextBlock x:Name="FoodTotalText" Text="Total: $0.00" FontWeight="Bold" HorizontalAlignment="Right" Margin="0,5,0,0"/>
              </StackPanel>
            </Border>
            
            <!-- Available Food Items -->
            <TextBlock Text="Available Items:" FontWeight="Bold" Margin="0,0,0,5"/>
            <ScrollViewer Height="300" Width="450" VerticalScrollBarVisibility="Auto">
              <StackPanel x:Name="FoodItemsList" Orientation="Vertical">
                <!-- Food items will be populated dynamically -->
              </StackPanel>
            </ScrollViewer>
            
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
              <Button Content="Cancel" Margin="0,0,10,0" Padding="20,10" Click="CancelFoodSelection_Click"/>
              <Button Content="Done" Padding="20,10" Click="ConfirmFoodSelection_Click" x:Name="ConfirmFoodButton"/>
            </StackPanel>
          </StackPanel>
        </Border>
      </Border>

      <!-- Tip Input Dialog -->
      <Border x:Name="TipInputDialog" 
              Grid.ColumnSpan="2" 
              Visibility="Collapsed"
              Background="#80000000" 
              HorizontalAlignment="Stretch" 
              VerticalAlignment="Stretch">
        <Border Background="White" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" 
                Padding="30" 
                CornerRadius="10"
                MinWidth="400">
          <StackPanel>
            <TextBlock Text="Enter Tip Amount" FontSize="20" FontWeight="Bold" Margin="0,0,0,20" HorizontalAlignment="Center"/>
            
            <!-- Tip Amount Display -->
            <Border Background="LightGray" 
                    Padding="20" 
                    CornerRadius="5" 
                    Margin="0,0,0,20">
              <TextBlock x:Name="TipAmountDisplay" 
                         Text="$0.00" 
                         FontSize="24" 
                         FontWeight="Bold" 
                         HorizontalAlignment="Center"/>
            </Border>
            
            <!-- Touchscreen Keypad -->
            <Grid Width="300" Height="300">
              <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
              </Grid.RowDefinitions>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              
              <!-- Row 1 -->
              <Button Grid.Row="0" Grid.Column="0" Content="1" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="1"/>
              <Button Grid.Row="0" Grid.Column="1" Content="2" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="2"/>
              <Button Grid.Row="0" Grid.Column="2" Content="3" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="3"/>
              
              <!-- Row 2 -->
              <Button Grid.Row="1" Grid.Column="0" Content="4" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="4"/>
              <Button Grid.Row="1" Grid.Column="1" Content="5" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="5"/>
              <Button Grid.Row="1" Grid.Column="2" Content="6" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="6"/>
              
              <!-- Row 3 -->
              <Button Grid.Row="2" Grid.Column="0" Content="7" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="7"/>
              <Button Grid.Row="2" Grid.Column="1" Content="8" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="8"/>
              <Button Grid.Row="2" Grid.Column="2" Content="9" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="9"/>
              
              <!-- Row 4 -->
              <Button Grid.Row="3" Grid.Column="0" Content="." FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="."/>
              <Button Grid.Row="3" Grid.Column="1" Content="0" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="0"/>
              <Button Grid.Row="3" Grid.Column="2" Content="âŒ«" FontSize="20" Margin="2" Click="TipKeypadButton_Click" Tag="backspace"/>
            </Grid>
            
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
              <Button Content="Close" Margin="0,0,10,0" Padding="20,10" Click="CloseTipInput_Click"/>
              <Button Content="Set Tip" Padding="20,10" Click="SetTipInput_Click"/>
            </StackPanel>
          </StackPanel>
        </Border>
      </Border>

      <!-- Extra Cash Input Dialog -->
      <Border x:Name="ExtraCashInputDialog" 
              Grid.ColumnSpan="2" 
              Visibility="Collapsed"
              Background="#80000000" 
              HorizontalAlignment="Stretch" 
              VerticalAlignment="Stretch">
        <Border Background="White" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" 
                Padding="30" 
                CornerRadius="10"
                MinWidth="500">
          <StackPanel>
            <TextBlock Text="Add Extra Cash" FontSize="20" FontWeight="Bold" Margin="0,0,0,20" HorizontalAlignment="Center"/>
            
            <!-- Extra Cash Amount Display -->
            <Border Background="LightGray" 
                    Padding="20" 
                    CornerRadius="5" 
                    Margin="0,0,0,20">
              <TextBlock x:Name="ExtraCashAmountDisplay" 
                         Text="$0.00" 
                         FontSize="24" 
                         FontWeight="Bold" 
                         HorizontalAlignment="Center"/>
            </Border>
            
            <!-- Cash Denomination Buttons -->
            <Grid Width="400" Height="360">
              <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
              </Grid.RowDefinitions>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              
              <!-- Row 1: Coins -->
              <Button Grid.Row="0" Grid.Column="0" Content="5c" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="5"/>
              <Button Grid.Row="0" Grid.Column="1" Content="10c" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="10"/>
              <Button Grid.Row="0" Grid.Column="2" Content="20c" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="20"/>
              <Button Grid.Row="0" Grid.Column="3" Content="50c" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="50"/>
              
              <!-- Row 2: Small Bills -->
              <Button Grid.Row="1" Grid.Column="0" Content="$1" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="100"/>
              <Button Grid.Row="1" Grid.Column="1" Content="$2" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="200"/>
              <Button Grid.Row="1" Grid.Column="2" Content="$5" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="500"/>
              <Button Grid.Row="1" Grid.Column="3" Content="$10" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="1000"/>
              
              <!-- Row 3: Large Bills -->
              <Button Grid.Row="2" Grid.Column="0" Content="$20" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="2000"/>
              <Button Grid.Row="2" Grid.Column="1" Content="$50" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="5000"/>
              <Button Grid.Row="2" Grid.Column="2" Content="$100" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="10000"/>
              <Button Grid.Row="2" Grid.Column="3" Content="Clear" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="clear"/>
              
              <!-- Row 4: Undo -->
              <Button Grid.Row="3" Grid.Column="3" Content="âŒ«" FontSize="16" Margin="2" Click="ExtraCashButton_Click" Tag="backspace"/>
            </Grid>
            
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
              <Button Content="Close" Margin="0,0,10,0" Padding="20,10" Click="CloseExtraCashInput_Click"/>
              <Button Content="Add Cash" Padding="20,10" Click="ConfirmExtraCashInput_Click"/>
            </StackPanel>
          </StackPanel>
        </Border>
      </Border>

      <!-- Change Denominations Dialog -->
      <Border x:Name="ChangeDenominationsDialog" 
              Grid.ColumnSpan="2" 
              Visibility="Collapsed"
              Background="#80000000" 
              HorizontalAlignment="Stretch" 
              VerticalAlignment="Stretch">
        <Border Background="White" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" 
                Padding="30" 
                CornerRadius="10"
                MinWidth="520"
                MinHeight="750">
          <StackPanel>
            <TextBlock Text="Customize Change Denominations" FontSize="20" FontWeight="Bold" Margin="0,0,0,10" HorizontalAlignment="Center"/>
            <TextBlock Text="(Manual customization disables automatic optimal)" FontSize="12" Foreground="Gray" Margin="0,0,0,20" HorizontalAlignment="Center"/>
            
            <StackPanel x:Name="ChangeDenominationsList" Width="460" Margin="0,0,0,20"/>
            
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
              <Button Content="Close" Margin="0,0,10,0" Padding="20,10" Click="CloseChangeDenominations_Click"/>
              <Button Content="Reset to Optimal" Padding="20,10" Click="ResetToOptimalChange_Click"/>
            </StackPanel>
          </StackPanel>
        </Border>
      </Border>

    </Grid>
  </Grid>
</UserControl>
