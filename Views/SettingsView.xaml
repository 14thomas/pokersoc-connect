<UserControl x:Class="pokersoc_connect.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             MinWidth="800">
  <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- Header -->
    <Grid Grid.Row="0" Margin="0,0,0,20">
      <TextBlock Text="Settings" FontSize="24" FontWeight="Bold" VerticalAlignment="Center"/>
      <Button Content="✕" HorizontalAlignment="Right" VerticalAlignment="Center" 
              Width="30" Height="30" Click="Close_Click" FontSize="16"/>
    </Grid>

    <!-- Settings Content -->
    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
      <StackPanel>
        
        <!-- Database Management Section -->
        <GroupBox Header="Database Management" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
              <Button Content="Import Settings..." Width="160" Margin="0,0,10,0" Click="ImportSettings_Click"/>
              <Button Content="Export Settings..." Width="160" Margin="0,0,10,0" Click="ExportSettings_Click"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
              <Button Content="Backup Database..." Width="160" Margin="0,0,10,0" Click="BackupDatabase_Click"/>
              <Button Content="Restore Database..." Width="160" Margin="0,0,10,0" Click="RestoreDatabase_Click"/>
            </StackPanel>
          </StackPanel>
        </GroupBox>

        <!-- Session Management Section -->
        <GroupBox Header="Session Management" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <StackPanel Orientation="Horizontal">
              <Button Content="New Session..." Width="160" Margin="0,0,10,0" Click="NewSession_Click"/>
              <Button Content="Close Session" Width="160" Margin="0,0,10,0" Click="CloseSession_Click"/>
            </StackPanel>
          </StackPanel>
        </GroupBox>

        <!-- Food Items Management Section -->
        <GroupBox Header="Food Items Management" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <TextBlock Text="Manage food items for sale:" Margin="0,0,0,10"/>
            
            <!-- Add New Item Section -->
            <GroupBox Header="Add New Item" Margin="0,0,0,10">
              <StackPanel Margin="10">
                <Grid>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="100"/>
                  </Grid.ColumnDefinitions>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>
                  
                  <TextBlock Grid.Row="0" Grid.Column="0" Text="Name:" VerticalAlignment="Center" Margin="0,0,5,5"/>
                  <TextBox x:Name="NewItemNameBox" Grid.Row="0" Grid.Column="1" Margin="0,0,10,5"/>
                  
                  <TextBlock Grid.Row="0" Grid.Column="2" Text="Price:" VerticalAlignment="Center" Margin="0,0,5,5"/>
                  <TextBox x:Name="NewItemPriceBox" Grid.Row="0" Grid.Column="3" Margin="0,0,10,5" Text="0.00"/>
                  
                  <Button Grid.Row="0" Grid.Column="4" Content="Add Item" Click="AddFoodItemInline_Click" Margin="0,0,0,5"/>
                  
                  <TextBlock Grid.Row="1" Grid.Column="0" Text="Image:" VerticalAlignment="Center" Margin="0,0,5,5"/>
                  <TextBox x:Name="NewItemImageBox" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" Margin="0,0,10,5"/>
                  <Button Grid.Row="1" Grid.Column="4" Content="Browse" Click="BrowseImage_Click" Margin="0,0,0,5"/>
                </Grid>
              </StackPanel>
            </GroupBox>
            
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
              <Button x:Name="DeleteFoodItemButton" Content="Delete Selected" Width="120" Margin="0,0,10,0" 
                      Click="DeleteFoodItem_Click" IsEnabled="False"/>
            </StackPanel>
            
            <DataGrid x:Name="FoodItemsGrid" 
                      AutoGenerateColumns="False" 
                      CanUserAddRows="False" 
                      CanUserDeleteRows="False"
                      CanUserResizeRows="False"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column"
                      SelectionChanged="FoodItemsGrid_SelectionChanged">
              <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding name}" Width="*" IsReadOnly="True"/>
                <DataGridTextColumn Header="Price" Binding="{Binding price}" Width="120" IsReadOnly="True"/>
                <DataGridTextColumn Header="Image Path" Binding="{Binding image_path}" Width="*" IsReadOnly="True"/>
              </DataGrid.Columns>
            </DataGrid>
          </StackPanel>
        </GroupBox>

        <!-- Chip Configuration Section -->
        <GroupBox Header="Chip Configuration" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <TextBlock Text="Customize chip colors and values:" Margin="0,0,0,10"/>
            
            <DataGrid x:Name="ChipConfigGrid" 
                      AutoGenerateColumns="False" 
                      CanUserAddRows="False" 
                      CanUserDeleteRows="False"
                      CanUserResizeRows="False"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column"
                      Margin="0,0,0,10">
              <DataGrid.Columns>
                <DataGridTextColumn Header="Denomination" Binding="{Binding Denomination}" Width="120" IsReadOnly="True"/>
                <DataGridTextColumn Header="Current Value" Binding="{Binding CurrentValue}" Width="100" IsReadOnly="True"/>
                <DataGridTextColumn Header="New Value" Binding="{Binding NewValue}" Width="100"/>
                <DataGridTemplateColumn Header="Color" Width="120">
                  <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                      <StackPanel Orientation="Horizontal">
                        <Border Width="20" Height="20" Background="{Binding Color}" BorderBrush="Gray" BorderThickness="1" Margin="0,0,5,0"/>
                        <Button Content="Change" Click="ChangeColor_Click" Tag="{Binding}"/>
                      </StackPanel>
                    </DataTemplate>
                  </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridCheckBoxColumn Header="Enabled" Binding="{Binding IsEnabled}" Width="80"/>
              </DataGrid.Columns>
            </DataGrid>
            
            <StackPanel Orientation="Horizontal">
              <Button Content="Reset to Defaults" Width="140" Margin="0,0,10,0" Click="ResetChips_Click"/>
              <Button Content="Apply Changes" Width="140" Margin="0,0,10,0" Click="ApplyChipChanges_Click"/>
            </StackPanel>
          </StackPanel>
        </GroupBox>

        <!-- About Section -->
        <GroupBox Header="About" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <TextBlock Text="pokersoc-connect v1.0" FontWeight="Bold" Margin="0,0,0,5"/>
            <TextBlock Text="A poker society management application for tracking buy-ins, cash-outs, and food sales." Margin="0,0,0,10"/>
            <TextBlock Text="Features:" FontWeight="Bold" Margin="0,0,0,5"/>
            <TextBlock Text="• Player buy-in and cash-out tracking" Margin="20,0,0,2"/>
            <TextBlock Text="• Cashbox management with denomination tracking" Margin="20,0,0,2"/>
            <TextBlock Text="• Food catalog and sales management" Margin="20,0,0,2"/>
            <TextBlock Text="• Settings import/export" Margin="20,0,0,2"/>
            <TextBlock Text="• Database backup and restore" Margin="20,0,0,2"/>
            <TextBlock Text="• Customizable chip configuration" Margin="20,0,0,2"/>
          </StackPanel>
        </GroupBox>

      </StackPanel>
    </ScrollViewer>
  </Grid>
</UserControl>
