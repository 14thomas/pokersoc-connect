<UserControl x:Class="pokersoc_connect.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             MinWidth="800">
  <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- Header -->
    <Grid Grid.Row="0" Margin="0,0,0,20">
      <TextBlock Text="Settings" FontSize="24" FontWeight="Bold" VerticalAlignment="Center"/>
      <Button Content="✕" HorizontalAlignment="Right" VerticalAlignment="Center" 
              Width="30" Height="30" Click="Close_Click" FontSize="16"/>
    </Grid>

    <!-- Settings Content -->
    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
      <StackPanel>
        
        <!-- Database Management Section -->
        <GroupBox Header="Database Management" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
              <Button Content="Import Settings..." Width="160" Margin="0,0,10,0" Click="ImportSettings_Click"/>
              <Button Content="Export Settings..." Width="160" Margin="0,0,10,0" Click="ExportSettings_Click"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
              <Button Content="Backup Database..." Width="160" Margin="0,0,10,0" Click="BackupDatabase_Click"/>
              <Button Content="Restore Database..." Width="160" Margin="0,0,10,0" Click="RestoreDatabase_Click"/>
            </StackPanel>
          </StackPanel>
        </GroupBox>

        <!-- Session Management Section -->
        <GroupBox Header="Session Management" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
              <Button Content="New Session..." Width="160" Margin="0,0,10,0" Click="NewSession_Click"/>
              <Button Content="Close Session" Width="160" Margin="0,0,10,0" Click="CloseSession_Click"/>
            </StackPanel>
            <TextBlock Text="Export players who participated in this session:" Margin="0,0,0,5"/>
            <StackPanel Orientation="Horizontal">
              <Button Content="Export Session Players..." Width="200" Margin="0,0,10,0" Click="ExportSessionPlayers_Click"/>
            </StackPanel>
          </StackPanel>
        </GroupBox>

        <!-- Food Items Management Section -->
        <GroupBox Header="Food Items Management" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <TextBlock Text="Manage food items for sale:" Margin="0,0,0,10"/>
            
            <!-- Add New Item Section -->
            <GroupBox Header="Add New Item" Margin="0,0,0,10">
              <StackPanel Margin="10">
                <Grid>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="100"/>
                  </Grid.ColumnDefinitions>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>
                  
                  <TextBlock Grid.Row="0" Grid.Column="0" Text="Name:" VerticalAlignment="Center" Margin="0,0,5,5"/>
                  <TextBox x:Name="NewItemNameBox" Grid.Row="0" Grid.Column="1" Margin="0,0,10,5"/>
                  
                  <TextBlock Grid.Row="0" Grid.Column="2" Text="Price:" VerticalAlignment="Center" Margin="0,0,5,5"/>
                  <TextBox x:Name="NewItemPriceBox" Grid.Row="0" Grid.Column="3" Margin="0,0,10,5" Text="0.00"/>
                  
                  <Button Grid.Row="0" Grid.Column="4" Content="Add Item" Click="AddFoodItemInline_Click" Margin="0,0,0,5"/>
                  
                  <TextBlock Grid.Row="1" Grid.Column="0" Text="Image:" VerticalAlignment="Center" Margin="0,0,5,5"/>
                  <TextBox x:Name="NewItemImageBox" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" Margin="0,0,10,5"/>
                  <Button Grid.Row="1" Grid.Column="4" Content="Browse" Click="BrowseImage_Click" Margin="0,0,0,5"/>
                </Grid>
              </StackPanel>
            </GroupBox>
            
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
              <Button x:Name="DeleteFoodItemButton" Content="Delete Selected" Width="120" Margin="0,0,10,0" 
                      Click="DeleteFoodItem_Click" IsEnabled="False"/>
            </StackPanel>
            
            <DataGrid x:Name="FoodItemsGrid" 
                      AutoGenerateColumns="False" 
                      CanUserAddRows="False" 
                      CanUserDeleteRows="False"
                      CanUserResizeRows="False"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column"
                      SelectionChanged="FoodItemsGrid_SelectionChanged">
              <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding name}" Width="*" IsReadOnly="True"/>
                <DataGridTextColumn Header="Price" Binding="{Binding price}" Width="120" IsReadOnly="True"/>
                <DataGridTextColumn Header="Image Path" Binding="{Binding image_path}" Width="*" IsReadOnly="True"/>
              </DataGrid.Columns>
            </DataGrid>
          </StackPanel>
        </GroupBox>

        <!-- Admin Settings Section -->
        <GroupBox Header="Admin Settings" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <TextBlock Text="Admin Password (for deleting transactions):" Margin="0,0,0,5"/>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <PasswordBox x:Name="AdminPasswordBox" Grid.Column="0" Margin="0,0,10,0" PasswordChanged="AdminPasswordBox_PasswordChanged"/>
              <Button Grid.Column="1" Content="Save Password" Width="120" Click="SaveAdminPassword_Click"/>
            </Grid>
            <TextBlock Text="Default password: 1234" FontSize="11" Foreground="Gray" Margin="0,5,0,0"/>
          </StackPanel>
        </GroupBox>

        <!-- About Section -->
        <GroupBox Header="About" Margin="0,0,0,20">
          <StackPanel Margin="10">
            <TextBlock Text="pokersoc-connect v1.31" FontWeight="Bold" Margin="0,0,0,5"/>
            <TextBlock Text="A poker society management application for tracking buy-ins, cash-outs, and food sales." Margin="0,0,0,10"/>
            <TextBlock Text="Features:" FontWeight="Bold" Margin="0,0,0,5"/>
            <TextBlock Text="• There are a lot of new features and improvements to the app." Margin="20,0,0,2"/>
            <TextBlock Text="• I think tom is really cool btw." Margin="20,0,0,2"/>            

          </StackPanel>
        </GroupBox>

      </StackPanel>
    </ScrollViewer>
  </Grid>
</UserControl>
