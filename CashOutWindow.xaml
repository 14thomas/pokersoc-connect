<Window x:Class="pokersoc_connect.CashOutWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Cash-out" Height="720" Width="980"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
  <Window.Resources>

    <!-- Chip (round) with count badge; color via Background -->
    <Style x:Key="ChipButtonStyle" TargetType="Button">
      <Setter Property="Width" Value="120"/>
      <Setter Property="Height" Value="120"/>
      <Setter Property="Margin" Value="10"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Grid>
              <Ellipse Fill="{TemplateBinding Background}"
                       Stroke="#80333333" StrokeThickness="2"/>
              <Border CornerRadius="999"
                      BorderBrush="#40FFFFFF" BorderThickness="6" />
                <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                TextElement.FontWeight="Bold"
                                TextElement.FontSize="28"
                                TextElement.Foreground="White"/>
              <Border x:Name="Badge" Background="#DD2E7D32" CornerRadius="12"
                      HorizontalAlignment="Right" VerticalAlignment="Top"
                      Margin="0,8,8,0" Padding="8,3" Visibility="Collapsed">
                <TextBlock x:Name="BadgeText" Foreground="White" FontWeight="Bold" FontSize="16"/>
              </Border>
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <!-- Plaque (rectangular large chip) -->
    <Style x:Key="PlaqueButtonStyle" TargetType="Button">
      <Setter Property="Width" Value="220"/>
      <Setter Property="Height" Value="110"/>
      <Setter Property="Margin" Value="10"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Grid>
              <Border CornerRadius="14"
                      Background="{TemplateBinding Background}"
                      BorderBrush="#80333333" BorderThickness="2"/>
                <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                TextElement.FontWeight="Bold"
                                TextElement.FontSize="34"
                                TextElement.Foreground="White"/>
              <Border x:Name="Badge" Background="#DD2E7D32" CornerRadius="12"
                      HorizontalAlignment="Right" VerticalAlignment="Top"
                      Margin="0,8,8,0" Padding="8,3" Visibility="Collapsed">
                <TextBlock x:Name="BadgeText" Foreground="White" FontWeight="Bold" FontSize="16"/>
              </Border>
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

  </Window.Resources>

  <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- Scan -->
    <StackPanel Orientation="Horizontal" Margin="0,0,0,14">
      <TextBlock Text="Scan member #:" VerticalAlignment="Center" Margin="0,0,10,0"/>
      <TextBox x:Name="ScanBox" Width="260" VerticalContentAlignment="Center" KeyDown="ScanBox_KeyDown"/>
      <Button Content="Clear" Margin="10,0,0,0" Click="ClearScan_Click"/>
    </StackPanel>

    <Grid Grid.Row="1">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>

      <!-- Chips -->
      <GroupBox Header="Chips received">
        <WrapPanel HorizontalAlignment="Center" VerticalAlignment="Center">
          <!-- round chips -->
          <Button x:Name="C5"    Style="{StaticResource ChipButtonStyle}"    Tag="5"    Background="#FFEFEFEF" Click="Chip_Click"><TextBlock>5c</TextBlock></Button>
          <Button x:Name="C25"   Style="{StaticResource ChipButtonStyle}"    Tag="25"   Background="#FFE53935" Click="Chip_Click"><TextBlock>25c</TextBlock></Button>
          <Button x:Name="C100"  Style="{StaticResource ChipButtonStyle}"    Tag="100"  Background="#FF1E88E5" Click="Chip_Click"><TextBlock>$1</TextBlock></Button>
          <Button x:Name="C200"  Style="{StaticResource ChipButtonStyle}"    Tag="200"  Background="#FF43A047" Click="Chip_Click"><TextBlock>$2</TextBlock></Button>
          <Button x:Name="C500"  Style="{StaticResource ChipButtonStyle}"    Tag="500"  Background="#FF212121" Click="Chip_Click"><TextBlock>$5</TextBlock></Button>

          <!-- plaques -->
          <Button x:Name="P2500" Style="{StaticResource PlaqueButtonStyle}"  Tag="2500" Background="#FFE0E0E0" Click="Chip_Click"><TextBlock>$25</TextBlock></Button>
          <Button x:Name="P10000" Style="{StaticResource PlaqueButtonStyle}" Tag="10000" Background="#FFE53935" Click="Chip_Click"><TextBlock>$100</TextBlock></Button>
        </WrapPanel>
      </GroupBox>

      <!-- divider -->
      <Grid Grid.Column="1" Margin="16,0" Width="2" Background="#22000000"/>

      <!-- Change plan -->
      <GroupBox Grid.Column="2" Header="Change to give (from cashbox)">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>

          <DataGrid x:Name="ChangeGrid" Grid.Row="0"
                    AutoGenerateColumns="False" IsReadOnly="True"
                    Margin="0,0,0,8">
            <DataGrid.Columns>
              <DataGridTextColumn Header="Denomination" Binding="{Binding Denomination}" Width="*"/>
              <DataGridTextColumn Header="Count"        Binding="{Binding Count}"        Width="*"/>
              <DataGridTextColumn Header="Value"        Binding="{Binding Value}"        Width="*"/>
            </DataGrid.Columns>
          </DataGrid>

            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Stretch">
            <TextBlock x:Name="ChangeStatus" VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>
      </GroupBox>
    </Grid>

    <!-- Footer -->
    <DockPanel Grid.Row="2" LastChildFill="False" Margin="0,16,0,0">
      <TextBlock x:Name="TotalText" FontSize="22" FontWeight="Bold" VerticalAlignment="Center" DockPanel.Dock="Left" Text="$0.00"/>
      <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
        <!-- speed keys -->
        <ToggleButton x:Name="X1"  Content="×1"  IsChecked="True" Margin="0,0,6,0" Width="70" Click="Multiplier_Click"/>
        <ToggleButton x:Name="X5"  Content="×5"               Margin="0,0,6,0" Width="70" Click="Multiplier_Click"/>
        <ToggleButton x:Name="X10" Content="×10"              Margin="0,0,16,0" Width="80" Click="Multiplier_Click"/>

        <Button Content="Undo"    Margin="0,0,8,0" Click="Undo_Click"/>
        <Button Content="Clear"   Margin="0,0,8,0" Click="Clear_Click"/>
        <Button Content="Cancel"  Margin="0,0,8,0" Click="Cancel_Click"/>
        <Button x:Name="ConfirmBtn" Content="Confirm" Margin="0,0,0,0" Click="Confirm_Click" IsDefault="True" IsEnabled="False"/>
      </StackPanel>
    </DockPanel>
  </Grid>
</Window>
